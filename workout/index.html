<!DOCTYPE html>
<html>
  <head>
    <title>Rower Status Display</title>
    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>
    <style> body {padding: 0; margin: 0;} </style>
    <script src="p5/p5.min.js"></script>
    <script src="p5/addons/p5.dom.min.js"></script>
    <script src="p5/addons/p5.sound.min.js"></script>
    <script src="sketch.js"></script>

<meta property="og:title" content="Rower Status Display">
<meta property="og:site_name" content="Open source rower monitor">
<meta property="og:url" content="https://trmm.net/Rower/">
<meta property="og:description" content="Interface to open source water-rower monitoring hardware">
<meta property="og:image" content="https://live.staticflickr.com/4472/37526022032_d7afc7358d.jpg">
  </head>
  <body>
<form id="uploadForm">
<input id="fileDownload" type="button" value="Download CSV" onclick="download()"/>
</form>

<div id="sketch-holder">
      <!-- Our sketch will go here! -->
</div>

<script>
function download()
{
	let csv = "";
	csv += "time,stroke_usec,vel,bad,spm\n";
	for(var d of data)
		csv += d.join(",") + "\n";
	
	var element = document.createElement('a');
	csv = encodeURIComponent(csv);
	element.setAttribute('href', 'data:text/plain;charset=utf-8,' + csv);
	element.setAttribute('download', "workout.csv");
	element.style.display = 'none';
	document.body.appendChild(element);
	element.click();
	document.body.removeChild(element);
}

</script>
  </body>
</html>
